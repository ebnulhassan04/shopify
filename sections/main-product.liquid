<section class="main-product-section py-5">
  <div class="container">
    <div class="row g-5">

      <!-- === Product Image Gallery === -->
      <div class="col-md-6">
        <div class="product-gallery">
          <div
            id="productCarousel"
            class="carousel slide"
            data-bs-ride="carousel">
            <div class="carousel-inner">
              {% for image in product.images %}
                <div class="carousel-item {% if forloop.first %} active {% endif %}">
                  <img
                    src="{{ image.src | image_url: width: 800 }}"
                    class="d-block w-100 rounded shadow-sm"
                    alt="{{ image.alt | escape }}">
                </div>
              {% endfor %}
            </div>

            {% if product.images.size > 1 %}
              <button
                class="carousel-control-prev"
                type="button"
                data-bs-target="#productCarousel"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
              </button>
              <button
                class="carousel-control-next"
                type="button"
                data-bs-target="#productCarousel"
                data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
              </button>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- === Product Info Section === -->
      <div class="col-md-6">
        <div class="product-info">

          {% for block in section.blocks %}
            {% case block.type %}

              <!-- Product Title -->
              {% when 'title' %}
                <h1 class="fw-bold mb-3" {{ block.shopify_attributes }}>
                  {{ product.title }}
                </h1>

              <!-- Product Price -->
              {% when 'price' %}
                <div class="mb-3" {{ block.shopify_attributes }}>
                  {% if product.compare_at_price_max > product.price %}
                    <span class="text-muted text-decoration-line-through me-2">
                      {{ product.compare_at_price_max | money }}
                    </span>
                  {% endif %}
                  <span class="fs-4 fw-bold text-primary">
                    {{ product.selected_or_first_available_variant.price | money }}
                  </span>
                </div>

              <!-- Product Form -->
              {% when 'form' %}
                {% form 'product'
                  , product %}
                  {% if product.variants.size > 1 %}
                    <div class="mb-3">
                      <label class="form-label fw-semibold">Select Option</label>
                      <select class="form-select" name="id">
                        {% for variant in product.variants %}
                          <option
                            value="{{ variant.id }}"
                            {% if variant == product.selected_or_first_available_variant %}
                            selected{% endif %}>
                            {{ variant.title }} - {{ variant.price | money }}
                          </option>
                        {% endfor %}
                      </select>
                    </div>
                  {% else %}
                    <input
                      type="hidden"
                      name="id"
                      value="{{ product.selected_or_first_available_variant.id }}">
                  {% endif %}

                  <!-- Quantity Selector -->
                  <div class="d-flex align-items-center mb-3">
                    <label class="me-2 fw-semibold">Qty:</label>
                    <input
                      type="number"
                      name="quantity"
                      value="1"
                      min="1"
                      class="form-control w-25">
                  </div>

                  <!-- Add to Cart Button -->
                  <div class="d-grid gap-2">
                    <button
                      type="submit"
                      name="add"
                      class="btn btn-primary btn-lg w-100"
                      {% unless product.available %}
                      disabled{% endunless %}>
                      {% if product.available %}
                        Add to Cart
                      {% else %}
                        Sold Out
                      {% endif %}
                    </button>

                    <!-- Dynamic Buy Now Button -->
                    <div class="shopify-payment-button">
                      {{ form | payment_button }}
                    </div>
                  </div>
                {% endform %}

              <!-- Product Description -->
              {% when 'description' %}
                <div class="mt-4" {{ block.shopify_attributes }}>
                  <h5 class="fw-bold">Description</h5>
                  <p class="text-muted">{{ product.description }}</p>
                </div>

              <!-- Social Share -->
              {% when 'share' %}
                <div class="mt-4" {{ block.shopify_attributes }}>
                  <h6 class="fw-semibold">Share this product</h6>
                  <a
                    href="https://www.facebook.com/sharer/sharer.php?u={{ shop.url }}{{ product.url }}"
                    class="btn btn-outline-primary btn-sm me-2"
                    target="_blank">Facebook</a>
                  <a
                    href="https://twitter.com/share?url={{ shop.url }}{{ product.url }}"
                    class="btn btn-outline-info btn-sm me-2"
                    target="_blank">Twitter</a>
                  <a
                    href="https://pinterest.com/pin/create/button/?url={{ shop.url }}{{ product.url }}"
                    class="btn btn-outline-danger btn-sm"
                    target="_blank">Pinterest</a>
                </div>

            {% endcase %}
          {% endfor %}

        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .main-product-section .product-gallery img {
    border-radius: 10px;
  }

  .main-product-section .carousel-control-prev-icon,
  .main-product-section .carousel-control-next-icon {
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 50%;
    padding: 10px;
  }

  .main-product-section .product-info h1 {
    font-size: 2rem;
  }

  .main-product-section .btn-primary {
    background-color: #007bff;
    border: none;
  }

  .main-product-section .btn-primary:hover {
    background-color: #0056b3;
  }
</style>

{% schema %}
  {
    "name": "Product Page",
    "settings": [],
    "blocks": [
      {
        "type": "title",
        "name": "Product Title",
        "limit": 1
      },
      {
        "type": "price",
        "name": "Product Price",
        "limit": 1
      },
      {
        "type": "form",
        "name": "Add to Cart Form",
        "limit": 1
      },
      {
        "type": "description",
        "name": "Product Description",
        "limit": 1
      }, {
        "type": "share",
        "name": "Social Share",
        "limit": 1
      }
    ],
    "presets": [
      {
        "name": "Default Product Page"
      }
    ]
  }
{% endschema %}